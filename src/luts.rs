use crate::constants::*;

pub fn trits_from_tryteindex(index: usize) -> [i8; BASE3] {
    assert!(index < BASE3_POW3, "invalid tryte index");

    TRYTEINDEX_TO_TRITS[index]
}

pub(crate) fn trits_from_tryteindex_internal(index: usize) -> [i8; BASE3] {
    TRYTEINDEX_TO_TRITS[index]
}

const TRYTEINDEX_TO_TRITS: [[i8; BASE3]; BASE3_POW3] = [
    [0, 0, 0], //  0   '9'
    [1, 0, 0], //  1   'A'
    [-1, 1, 0],
    [0, 1, 0],
    [1, 1, 0],
    [-1, -1, 1],
    [0, -1, 1],
    [1, -1, 1],
    [-1, 0, 1],
    [0, 0, 1],
    [1, 0, 1],
    [-1, 1, 1],
    [0, 1, 1],
    [1, 1, 1],    // 13   'M'
    [-1, -1, -1], //-13   'N'
    [0, -1, -1],
    [1, -1, -1],
    [-1, 0, -1],
    [0, 0, -1],
    [1, 0, -1],
    [-1, 1, -1],
    [0, 1, -1],
    [1, 1, -1],
    [-1, -1, 0],
    [0, -1, 0],
    [1, -1, 0],
    [-1, 0, 0], // -1   'Z'
];

pub fn trits_from_byte(byte: u8) -> [i8; MAX_NUM_TRITS_PER_BYTE] {
    let index = byte as usize;
    assert!(index < BASE3_POW5, "Invalid T5B1 bytes");

    BYTE_TO_TRITS[index]
}

pub(crate) fn trits_from_byte_internal(byte: u8) -> [i8; MAX_NUM_TRITS_PER_BYTE] {
    BYTE_TO_TRITS[byte as usize]
}

const BYTE_TO_TRITS: [[i8; MAX_NUM_TRITS_PER_BYTE]; BASE3_POW5] = [
    [0, 0, 0, 0, 0],  // 0
    [1, 0, 0, 0, 0],  // 1
    [-1, 1, 0, 0, 0], // 2 (-1 + 3)
    [0, 1, 0, 0, 0],  // 3
    [1, 1, 0, 0, 0],  // 4 ( 1 + 3)
    [-1, -1, 1, 0, 0],
    [0, -1, 1, 0, 0],
    [1, -1, 1, 0, 0],
    [-1, 0, 1, 0, 0],
    [0, 0, 1, 0, 0],
    [1, 0, 1, 0, 0],
    [-1, 1, 1, 0, 0],
    [0, 1, 1, 0, 0],
    [1, 1, 1, 0, 0],
    [-1, -1, -1, 1, 0],
    [0, -1, -1, 1, 0],
    [1, -1, -1, 1, 0],
    [-1, 0, -1, 1, 0],
    [0, 0, -1, 1, 0],
    [1, 0, -1, 1, 0],
    [-1, 1, -1, 1, 0],
    [0, 1, -1, 1, 0],
    [1, 1, -1, 1, 0],
    [-1, -1, 0, 1, 0],
    [0, -1, 0, 1, 0],
    [1, -1, 0, 1, 0],
    [-1, 0, 0, 1, 0],
    [0, 0, 0, 1, 0],
    [1, 0, 0, 1, 0],
    [-1, 1, 0, 1, 0],
    [0, 1, 0, 1, 0],
    [1, 1, 0, 1, 0],
    [-1, -1, 1, 1, 0],
    [0, -1, 1, 1, 0],
    [1, -1, 1, 1, 0],
    [-1, 0, 1, 1, 0],
    [0, 0, 1, 1, 0],
    [1, 0, 1, 1, 0],
    [-1, 1, 1, 1, 0],
    [0, 1, 1, 1, 0],
    [1, 1, 1, 1, 0],
    [-1, -1, -1, -1, 1],
    [0, -1, -1, -1, 1],
    [1, -1, -1, -1, 1],
    [-1, 0, -1, -1, 1],
    [0, 0, -1, -1, 1],
    [1, 0, -1, -1, 1],
    [-1, 1, -1, -1, 1],
    [0, 1, -1, -1, 1],
    [1, 1, -1, -1, 1],
    [-1, -1, 0, -1, 1],
    [0, -1, 0, -1, 1],
    [1, -1, 0, -1, 1],
    [-1, 0, 0, -1, 1],
    [0, 0, 0, -1, 1],
    [1, 0, 0, -1, 1],
    [-1, 1, 0, -1, 1],
    [0, 1, 0, -1, 1],
    [1, 1, 0, -1, 1],
    [-1, -1, 1, -1, 1],
    [0, -1, 1, -1, 1],
    [1, -1, 1, -1, 1],
    [-1, 0, 1, -1, 1],
    [0, 0, 1, -1, 1],
    [1, 0, 1, -1, 1],
    [-1, 1, 1, -1, 1],
    [0, 1, 1, -1, 1],
    [1, 1, 1, -1, 1],
    [-1, -1, -1, 0, 1],
    [0, -1, -1, 0, 1],
    [1, -1, -1, 0, 1],
    [-1, 0, -1, 0, 1],
    [0, 0, -1, 0, 1],
    [1, 0, -1, 0, 1],
    [-1, 1, -1, 0, 1],
    [0, 1, -1, 0, 1],
    [1, 1, -1, 0, 1],
    [-1, -1, 0, 0, 1],
    [0, -1, 0, 0, 1],
    [1, -1, 0, 0, 1],
    [-1, 0, 0, 0, 1],
    [0, 0, 0, 0, 1],
    [1, 0, 0, 0, 1],
    [-1, 1, 0, 0, 1],
    [0, 1, 0, 0, 1],
    [1, 1, 0, 0, 1],
    [-1, -1, 1, 0, 1],
    [0, -1, 1, 0, 1],
    [1, -1, 1, 0, 1],
    [-1, 0, 1, 0, 1],
    [0, 0, 1, 0, 1],
    [1, 0, 1, 0, 1],
    [-1, 1, 1, 0, 1],
    [0, 1, 1, 0, 1],
    [1, 1, 1, 0, 1],
    [-1, -1, -1, 1, 1],
    [0, -1, -1, 1, 1],
    [1, -1, -1, 1, 1],
    [-1, 0, -1, 1, 1],
    [0, 0, -1, 1, 1],
    [1, 0, -1, 1, 1],
    [-1, 1, -1, 1, 1],
    [0, 1, -1, 1, 1],
    [1, 1, -1, 1, 1],
    [-1, -1, 0, 1, 1],
    [0, -1, 0, 1, 1],
    [1, -1, 0, 1, 1],
    [-1, 0, 0, 1, 1],
    [0, 0, 0, 1, 1],
    [1, 0, 0, 1, 1],
    [-1, 1, 0, 1, 1],
    [0, 1, 0, 1, 1],
    [1, 1, 0, 1, 1],
    [-1, -1, 1, 1, 1],
    [0, -1, 1, 1, 1],
    [1, -1, 1, 1, 1],
    [-1, 0, 1, 1, 1],
    [0, 0, 1, 1, 1],
    [1, 0, 1, 1, 1],
    [-1, 1, 1, 1, 1],
    [0, 1, 1, 1, 1],
    [1, 1, 1, 1, 1],      // =  1 + 3 + 9 + 27 + 81 = 121
    [-1, -1, -1, -1, -1], // = -1 - 3 - 9 - 27 - 81 =-121
    [0, -1, -1, -1, -1],
    [1, -1, -1, -1, -1],
    [-1, 0, -1, -1, -1],
    [0, 0, -1, -1, -1],
    [1, 0, -1, -1, -1],
    [-1, 1, -1, -1, -1],
    [0, 1, -1, -1, -1],
    [1, 1, -1, -1, -1],
    [-1, -1, 0, -1, -1],
    [0, -1, 0, -1, -1],
    [1, -1, 0, -1, -1],
    [-1, 0, 0, -1, -1],
    [0, 0, 0, -1, -1],
    [1, 0, 0, -1, -1],
    [-1, 1, 0, -1, -1],
    [0, 1, 0, -1, -1],
    [1, 1, 0, -1, -1],
    [-1, -1, 1, -1, -1],
    [0, -1, 1, -1, -1],
    [1, -1, 1, -1, -1],
    [-1, 0, 1, -1, -1],
    [0, 0, 1, -1, -1],
    [1, 0, 1, -1, -1],
    [-1, 1, 1, -1, -1],
    [0, 1, 1, -1, -1],
    [1, 1, 1, -1, -1],
    [-1, -1, -1, 0, -1],
    [0, -1, -1, 0, -1],
    [1, -1, -1, 0, -1],
    [-1, 0, -1, 0, -1],
    [0, 0, -1, 0, -1],
    [1, 0, -1, 0, -1],
    [-1, 1, -1, 0, -1],
    [0, 1, -1, 0, -1],
    [1, 1, -1, 0, -1],
    [-1, -1, 0, 0, -1],
    [0, -1, 0, 0, -1],
    [1, -1, 0, 0, -1],
    [-1, 0, 0, 0, -1],
    [0, 0, 0, 0, -1],
    [1, 0, 0, 0, -1],
    [-1, 1, 0, 0, -1],
    [0, 1, 0, 0, -1],
    [1, 1, 0, 0, -1],
    [-1, -1, 1, 0, -1],
    [0, -1, 1, 0, -1],
    [1, -1, 1, 0, -1],
    [-1, 0, 1, 0, -1],
    [0, 0, 1, 0, -1],
    [1, 0, 1, 0, -1],
    [-1, 1, 1, 0, -1],
    [0, 1, 1, 0, -1],
    [1, 1, 1, 0, -1],
    [-1, -1, -1, 1, -1],
    [0, -1, -1, 1, -1],
    [1, -1, -1, 1, -1],
    [-1, 0, -1, 1, -1],
    [0, 0, -1, 1, -1],
    [1, 0, -1, 1, -1],
    [-1, 1, -1, 1, -1],
    [0, 1, -1, 1, -1],
    [1, 1, -1, 1, -1],
    [-1, -1, 0, 1, -1],
    [0, -1, 0, 1, -1],
    [1, -1, 0, 1, -1],
    [-1, 0, 0, 1, -1],
    [0, 0, 0, 1, -1],
    [1, 0, 0, 1, -1],
    [-1, 1, 0, 1, -1],
    [0, 1, 0, 1, -1],
    [1, 1, 0, 1, -1],
    [-1, -1, 1, 1, -1],
    [0, -1, 1, 1, -1],
    [1, -1, 1, 1, -1],
    [-1, 0, 1, 1, -1],
    [0, 0, 1, 1, -1],
    [1, 0, 1, 1, -1],
    [-1, 1, 1, 1, -1],
    [0, 1, 1, 1, -1],
    [1, 1, 1, 1, -1],
    [-1, -1, -1, -1, 0],
    [0, -1, -1, -1, 0],
    [1, -1, -1, -1, 0],
    [-1, 0, -1, -1, 0],
    [0, 0, -1, -1, 0],
    [1, 0, -1, -1, 0],
    [-1, 1, -1, -1, 0],
    [0, 1, -1, -1, 0],
    [1, 1, -1, -1, 0],
    [-1, -1, 0, -1, 0],
    [0, -1, 0, -1, 0],
    [1, -1, 0, -1, 0],
    [-1, 0, 0, -1, 0],
    [0, 0, 0, -1, 0],
    [1, 0, 0, -1, 0],
    [-1, 1, 0, -1, 0],
    [0, 1, 0, -1, 0],
    [1, 1, 0, -1, 0],
    [-1, -1, 1, -1, 0],
    [0, -1, 1, -1, 0],
    [1, -1, 1, -1, 0],
    [-1, 0, 1, -1, 0],
    [0, 0, 1, -1, 0],
    [1, 0, 1, -1, 0],
    [-1, 1, 1, -1, 0],
    [0, 1, 1, -1, 0],
    [1, 1, 1, -1, 0],
    [-1, -1, -1, 0, 0],
    [0, -1, -1, 0, 0],
    [1, -1, -1, 0, 0],
    [-1, 0, -1, 0, 0],
    [0, 0, -1, 0, 0],
    [1, 0, -1, 0, 0],
    [-1, 1, -1, 0, 0],
    [0, 1, -1, 0, 0],
    [1, 1, -1, 0, 0],
    [-1, -1, 0, 0, 0],
    [0, -1, 0, 0, 0],
    [1, -1, 0, 0, 0],
    [-1, 0, 0, 0, 0],
];
